{"ast":null,"code":"var _jsxFileName = \"/home/srdjan/Desktop/LS/capstone_ta/reaction_boilerplate/reaction/app/javascript/components/shared/Popover.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from \"react\";\nimport $ from \"jquery\";\nimport debounce from \"debounce\";\n\nvar Popover =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Popover, _React$Component);\n\n  function Popover() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Popover);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Popover)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      position: {\n        top: 0,\n        left: 0\n      }\n    };\n\n    _this.setLocation = function () {\n      var $attachedTo = $(_this.props.attachedTo);\n      var targetLocation = $attachedTo.offset();\n      var attachedHeight = $attachedTo.outerHeight();\n      var elWidth = $(_this.refs.popover).outerWidth(true);\n      var elHeight = $(_this.refs.popover).outerHeight(true);\n      var $header = $(_this.refs.popover).find(\"header\").eq(0);\n      var $content = $(_this.refs.popover).find(\".content\").eq(0);\n      var contentVerticalMargin = $content.outerHeight(true) - $content.outerHeight();\n      var headerHeight = $header.outerHeight(true);\n      var windowWidth = $(window).width();\n      var windowHeight = $(window).height();\n      var overRightBounds = elWidth + targetLocation.left - windowWidth;\n      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n\n      if (!_this.props.coverTarget) {\n        targetLocation.top += attachedHeight + 3;\n      }\n\n      var overBottomBounds = targetLocation.top + elHeight - (windowHeight + scrollTop);\n\n      if (overRightBounds > 0) {\n        targetLocation.left -= overRightBounds;\n        targetLocation.left -= 20;\n      }\n\n      if (targetLocation.left < 0) {\n        targetLocation.left = 20;\n      }\n\n      if (overBottomBounds > 0) {\n        targetLocation.top -= overBottomBounds;\n        targetLocation.top -= 20;\n      }\n\n      if (targetLocation.top < 0) {\n        targetLocation.top = 20;\n      }\n\n      $content.css({\n        maxHeight: Math.max(windowHeight - 40 - headerHeight - contentVerticalMargin, 50)\n      });\n\n      _this.setState({\n        position: targetLocation\n      });\n    };\n\n    _this.addSizeBindings = function () {\n      window.addEventListener(\"resize\", _this.debounceSetLocation);\n    };\n\n    _this.removeSizeBindings = function () {\n      window.removeEventListener(\"resize\", _this.debounceSetLocation);\n\n      _this.debounceSetLocation.clear();\n    };\n\n    return _this;\n  }\n\n  _createClass(Popover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.debounceSetLocation = debounce(this.setLocation, 200);\n\n      if (this.props.visible) {\n        this.setLocation();\n        this.addSizeBindings();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.visible && !this.props.visible) {\n        this.removeSizeBindings();\n      } else if (!prevProps.visible && this.props.visible) {\n        this.setLocation();\n        this.addSizeBindings();\n      } else if (this.props.visible && prevProps.attachedTo !== this.props.attachedTo) {\n        this.setLocation();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeSizeBindings();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.visible) {\n        return React.createElement(\"div\", {\n          ref: \"popover\",\n          className: \"popover \".concat(this.props.type),\n          style: {\n            top: this.state.position.top,\n            left: this.state.position.left\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, this.props.children);\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return Popover;\n}(React.Component);\n\nexport default Popover;","map":{"version":3,"sources":["/home/srdjan/Desktop/LS/capstone_ta/reaction_boilerplate/reaction/app/javascript/components/shared/Popover.jsx"],"names":["React","$","debounce","Popover","state","position","top","left","setLocation","$attachedTo","props","attachedTo","targetLocation","offset","attachedHeight","outerHeight","elWidth","refs","popover","outerWidth","elHeight","$header","find","eq","$content","contentVerticalMargin","headerHeight","windowWidth","window","width","windowHeight","height","overRightBounds","scrollTop","pageYOffset","document","documentElement","body","coverTarget","overBottomBounds","css","maxHeight","Math","max","setState","addSizeBindings","addEventListener","debounceSetLocation","removeSizeBindings","removeEventListener","clear","visible","prevProps","type","children","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from \"jquery\";\nimport debounce from \"debounce\";\n\nclass Popover extends React.Component {\n  state = {\n    position: {\n      top: 0,\n      left: 0\n    }\n  };\n\n  componentDidMount() {\n    this.debounceSetLocation = debounce(this.setLocation, 200);\n\n    if (this.props.visible) {\n      this.setLocation();\n      this.addSizeBindings();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.visible && !this.props.visible) {\n      this.removeSizeBindings();\n    } else if (!prevProps.visible && this.props.visible) {\n      this.setLocation();\n      this.addSizeBindings();\n    } else if (\n      this.props.visible &&\n      prevProps.attachedTo !== this.props.attachedTo\n    ) {\n      this.setLocation();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeSizeBindings();\n  }\n\n  setLocation = () => {\n    const $attachedTo = $(this.props.attachedTo);\n    const targetLocation = $attachedTo.offset();\n    const attachedHeight = $attachedTo.outerHeight();\n    const elWidth = $(this.refs.popover).outerWidth(true);\n    const elHeight = $(this.refs.popover).outerHeight(true);\n    const $header = $(this.refs.popover)\n      .find(\"header\")\n      .eq(0);\n    const $content = $(this.refs.popover)\n      .find(\".content\")\n      .eq(0);\n    const contentVerticalMargin =\n      $content.outerHeight(true) - $content.outerHeight();\n    const headerHeight = $header.outerHeight(true);\n    const windowWidth = $(window).width();\n    const windowHeight = $(window).height();\n    const overRightBounds = elWidth + targetLocation.left - windowWidth;\n    const scrollTop =\n      window.pageYOffset ||\n      document.documentElement.scrollTop ||\n      document.body.scrollTop ||\n      0;\n\n    if (!this.props.coverTarget) {\n      targetLocation.top += attachedHeight + 3;\n    }\n\n    const overBottomBounds =\n      targetLocation.top + elHeight - (windowHeight + scrollTop);\n\n    if (overRightBounds > 0) {\n      targetLocation.left -= overRightBounds;\n      targetLocation.left -= 20;\n    }\n\n    if (targetLocation.left < 0) {\n      targetLocation.left = 20;\n    }\n\n    if (overBottomBounds > 0) {\n      targetLocation.top -= overBottomBounds;\n      targetLocation.top -= 20;\n    }\n\n    if (targetLocation.top < 0) {\n      targetLocation.top = 20;\n    }\n\n    $content.css({\n      maxHeight: Math.max(\n        windowHeight - 40 - headerHeight - contentVerticalMargin,\n        50\n      )\n    });\n\n    this.setState({\n      position: targetLocation\n    });\n  };\n\n  addSizeBindings = () => {\n    window.addEventListener(\"resize\", this.debounceSetLocation);\n  };\n\n  removeSizeBindings = () => {\n    window.removeEventListener(\"resize\", this.debounceSetLocation);\n    this.debounceSetLocation.clear();\n  };\n\n  render() {\n    if (this.props.visible) {\n      return (\n        <div\n          ref=\"popover\"\n          className={`popover ${this.props.type}`}\n          style={{\n            top: this.state.position.top,\n            left: this.state.position.left\n          }}\n        >\n          {this.props.children}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Popover;\n"]},"metadata":{},"sourceType":"module"}